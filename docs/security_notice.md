# 🔐 セキュリティに関する重要な注意事項

## クライアントサイド暗号化の限界

このアプリケーションでは、localStorage に保存する機密情報（GitHub Token、Anthropic API Key）を暗号化していますが、**クライアントサイドの暗号化には根本的な限界があります**。

### ⚠️ セキュリティ上の制限

1. **暗号化キーの露出リスク**
   - JavaScript のソースコードはブラウザで実行されるため、理論上は解析可能
   - 開発者ツールでメモリやネットワーク通信を監視される可能性

2. **ブラウザ環境での制約**
   - XSS攻撃によりスクリプトが実行された場合、暗号化されたデータにアクセスされる可能性
   - ブラウザの拡張機能やマルウェアによる監視リスク

3. **物理的アクセス**
   - デバイスへの物理的アクセスがある場合、暗号化キーが取得される可能性

## 🛡️ 実装されているセキュリティ対策

### 二段階暗号化システム

1. **高度暗号化 (Web Crypto API対応ブラウザ)**
   - **AES-GCM 256bit**: 軍事レベルの暗号化アルゴリズム
   - **ランダム IV**: 毎回異なる初期化ベクトルで安全性向上
   - **ユーザー固有キー**: ブラウザ環境に基づいてキー生成

2. **基本暗号化 (フォールバック)**
   - **XOR暗号化**: 古いブラウザでの最低限の保護
   - **Base64エンコード**: 難読化による追加保護
   - **ユーザー固有キー**: 環境情報からキー生成

### データ分離保護

- **非機密情報**: 平文でlocalStorageに保存（リポジトリ名、設定フラグ）
- **機密情報**: 暗号化してlocalStorageに保存（トークン、APIキー）
- **ログ保護**: コンソールログで機密情報を`***`でマスク

## 🔒 セキュリティレベル評価

| 保護対象 | 現在の実装 | セキュリティレベル |
|----------|------------|-------------------|
| 偶然の閲覧 | ✅ 十分 | 🟢 高 |
| 一般ユーザーのアクセス | ✅ 十分 | 🟢 高 |
| 開発者による解析 | ⚠️ 限定的 | 🟡 中 |
| 高度な攻撃 | ❌ 不十分 | 🔴 低 |

## 🏆 推奨される追加セキュリティ対策

### 個人使用での対策
1. **ブラウザの安全性確保**
   - 最新バージョンの使用
   - 不審な拡張機能の削除
   - 安全でないサイトでの使用回避

2. **APIキーの管理**
   - 定期的なキーローテーション
   - 必要最小限の権限設定
   - 使用後の適切な削除

### 本格運用での対策
1. **サーバーサイド実装**
   - バックエンドでの暗号化とキー管理
   - OAuth認証の実装
   - セキュアなAPI設計

2. **エンタープライズ対応**
   - HSM（Hardware Security Module）の使用
   - 証明書ベースの認証
   - ログ監査とアクセス制御

## 📝 まとめ

現在の実装は**一般的な個人使用には十分なセキュリティ**を提供しますが、企業環境や高度なセキュリティが求められる用途では、サーバーサイドでの実装を強く推奨します。

このような透明性を保つことで、ユーザーが適切なセキュリティレベルを理解し、自身の用途に適した使用方法を選択できます。 